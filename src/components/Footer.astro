---
const today = new Date();

const footerCopyrightLanding = [
  "All vibes reserved",
  "Some rights imagined",
  "Powered by curiosity",
  "Commit saved",
  "Rendering complete",
  "Instance running",
  "Data stored in memory",
  "Fork at will",
  "Stay tuned",
  "System at rest",
  "Route recalculated"
]

const footerCopyrightOnInput = [
  "Proud co-owner of this moment",
  "One of us now",
  "Journey logged",
  "Another traveler passes by",
  "Transmission received",
  "Signal fading into the ether",
  "Keep wandering",
  "You're part of it now",
  "Session archived",
  "Wave frequency matched",
  "Ping acknowledged",
  "Log entry completed",
  "Access granted",
  "Echo detected",
  "Wander mode: active"
]

const getRandomItem = (items: string[]) => {
	const index = Math.floor(Math.random() * items.length);
	return items[index];
};

const randomFooterLandingText = getRandomItem(footerCopyrightLanding);
const randomFooterOnInputText = getRandomItem(footerCopyrightOnInput);

---

<footer class="pt-8 px-4 pb-24 text-muted text-center">
	<span class="group">(c) 
		<span class="group-hover:hidden inline">{today.getFullYear()}</span>
		<span class="group-hover:inline hidden">2014</span>
	</span>

	<div id="footer-fancy-input" contenteditable tabindex="0" placeholder="Your name here." 
	class={"relative inline-block font-bold text-primary-dark text-xl empty:min-w-40 w-fit text-right"+
	"focus:before:hidden empty:before:content-[attr(placeholder)] before:absolute before:inset-0 before:pointer-events-none "+
	"not-empty:after:content-['.'] "+
	"[&>br]:hidden"}></div> 
	<span id="footer-fancy-copyright" data-on-input-text={randomFooterOnInputText} data-landing-text={randomFooterLandingText}>{randomFooterLandingText}</span>.
	<div id="social-links" class="flex justify-center gap-4 mt-12 text-muted [&>a]:text-inherit *:hover:text-primary *:hover:stroke-2">
		<a href="https://bsky.app/profile/mycolaos.bsky.social" target="_blank">
			<span class="sr-only">Follow Mycolaos on Blue Sky</span>
			<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 48 48"><!-- Icon from Arcticons by Donnnno - https://creativecommons.org/licenses/by-sa/4.0/ --><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M24 32.19c0-.196.075.025.237.5c.874 2.577 4.289 12.631 12.096 4.593c4.111-4.232 2.208-8.463-5.275-9.741c4.28.73 9.094-.477 10.414-5.212c.38-1.362 1.028-9.752 1.028-10.885c0-5.676-4.96-3.892-8.02-1.587c-4.242 3.195-8.805 9.673-10.48 13.15c-1.675-3.477-6.238-9.954-10.48-13.15C10.46 7.553 5.5 5.77 5.5 11.445c0 1.133.647 9.523 1.028 10.885c1.32 4.735 6.133 5.943 10.414 5.212c-7.483 1.278-9.386 5.51-5.275 9.741c7.807 8.038 11.222-2.016 12.096-4.592c.162-.476.237-.697.237-.501"/></svg>
		</a>
		<a href="https://twitter.com/mycolaos" target="_blank">
			<span class="sr-only">Follow Mycolaos on Twitter</span>
			<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 48 48"><!-- Icon from Arcticons by Donnnno - https://creativecommons.org/licenses/by-sa/4.0/ --><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M38.74 16.55v1c0 10.07-7.64 21.61-21.62 21.61A21.14 21.14 0 0 1 5.5 35.71a12 12 0 0 0 1.81.11a15.25 15.25 0 0 0 9.44-3.24a7.56 7.56 0 0 1-7.1-5.29a7 7 0 0 0 1.44.15a7.5 7.5 0 0 0 2-.27A7.57 7.57 0 0 1 7 19.72v-.1a7.4 7.4 0 0 0 3.44.94A7.54 7.54 0 0 1 8.05 10.5a21.58 21.58 0 0 0 15.68 7.94a6.4 6.4 0 0 1-.21-1.74a7.55 7.55 0 0 1 13.17-5.31a15.6 15.6 0 0 0 4.83-1.85a7.65 7.65 0 0 1-3.39 4.27a15.9 15.9 0 0 0 4.37-1.26a15.6 15.6 0 0 1-3.76 4"/></svg>
		</a>
		<a href="https://github.com/mycolaos" target="_blank">
			<span class="sr-only">Follow Mycolaos on GitHub</span>
			<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 48 48"><!-- Icon from Arcticons by Donnnno - https://creativecommons.org/licenses/by-sa/4.0/ --><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M18.901 39.659V38.41c-7.172 1.554-8.654-3.44-8.654-3.44a6.8 6.8 0 0 0-2.904-3.812c-2.331-1.59.179-1.566.179-1.566a5.4 5.4 0 0 1 3.932 2.653c2.295 3.931 5.977 2.796 7.483 2.139a5.5 5.5 0 0 1 1.638-3.442C14.86 30.298 8.86 28.1 8.86 18.253a9.9 9.9 0 0 1 2.653-6.894a9.17 9.17 0 0 1 .251-6.799s2.152-.693 7.064 2.629a24.46 24.46 0 0 1 12.862 0c4.912-3.322 7.064-2.629 7.064-2.629a9.25 9.25 0 0 1 .25 6.799a9.9 9.9 0 0 1 2.642 6.894c0 9.87-5.976 12.033-11.725 12.678a6.12 6.12 0 0 1 1.745 4.78v3.936c0 1.72-1.235 3.794-2.868 3.837c-1.046.028-2.276.01-3.515.01c-1.214 0-2.42-.01-3.453-.058c-1.657-.078-2.93-2.057-2.93-3.777"/></svg>
		</a>
		<a href="https://threads.net/@mycolaos" target="_blank">
			<span class="sr-only">Follow Mycolaos on Threads</span>
			<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 48 48"><!-- Icon from Arcticons by Donnnno - https://creativecommons.org/licenses/by-sa/4.0/ --><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M17.95 16.332c2.077-2.076 3.948-2.943 6.732-2.943s9.128.98 8.245 11.085c-.883 10.104-7.138 9.777-8.245 9.777c-4.115 0-7.385-1.667-7.385-5.853c0-5.752 6.638-6.05 8.861-6.05c5.428 0 14.42 1.652 14.42 10.726c0 11.053-12.98 12.426-16.349 12.426c-8.11 0-18.639-4.12-18.639-22.203S19.184 2.5 24.682 2.5s13.264.801 17.728 12.818"/></svg>
	</div>
</footer>
<script>
	const footerFancyInput = document.getElementById('footer-fancy-input');
	const footerFancyCopyright = document.getElementById('footer-fancy-copyright');

	if (!footerFancyCopyright) {
			console.error('Footer fancy copyright element not found');
		}

	function typewriterEffect(element, text, speed = 75) {
		element.textContent = '_';
		let i = 0;
		function type() {
			if (i < text.length) {
				const nextPart = element.textContent.replace('_', '') + text.charAt(i);
				element.textContent = nextPart  +  (i < text.length - 1 ? '_' : '');
				i++;
				setTimeout(type, speed);
			}
		}
		type();
	}

	if(footerFancyCopyright) {
		footerFancyInput?.addEventListener('blur', (event) => {
			footerFancyInput.textContent = footerFancyInput.textContent?.trim() || '';

			if (footerFancyInput.textContent) {
				// Trigger effect only if the current copyright text is different.
				if (footerFancyCopyright.textContent !== footerFancyCopyright.dataset.onInputText) {
					typewriterEffect(footerFancyCopyright, footerFancyCopyright.dataset.onInputText || 'No text found, contact admin.');
				}
			} else {
				// Trigger effect only if the current copyright text is different.
				if (footerFancyCopyright.textContent !== footerFancyCopyright.dataset.landingText) {
					typewriterEffect(footerFancyCopyright, footerFancyCopyright.dataset.landingText || 'No text found, contact admin.');
					}
				}
		});
	}
</script>
